---
title: Mockito와 @Mock @MockBean의 차이점 이해하기
date: 2023-09-08 20:00:00 +0900
categories:
  - Spring
tags:
  - Mockito
  - Mock
  - MockBean
---
## 개요

이 글에서는 자바 테스트 프레임워크인 Mockito와, 스프링 부트에서 주로 사용되는 어노테이션인 `@Mock`과 `@MockBean`에 대해 알아보겠습니다. 각각의 역할과 어떤 상황에서 사용하는 것이 좋은지에 대해 상세히 설명하겠습니다.

## Mockito란?

Mockito는 자바에서 단위 테스트를 작성할 때 사용되는 목(mock) 객체를 생성하는 라이브러리입니다. 목 객체란 실제 구현을 가지지 않은, 테스트를 위해 작성된 객체를 의미합니다. Mockito를 사용하면 이런 목 객체를 쉽게 만들 수 있으며, 메서드 호출에 대한 반환값이나 예외 등을 설정할 수 있습니다.

## @Mock 어노테이션

`@Mock`은 Mockito 라이브러리에서 제공하는 어노테이션입니다. 이 어노테이션을 사용하면 테스트 코드 내에서 자동으로 목 객체를 생성합니다. 단순히 Mockito의 목 객체를 생성하고 싶을 때 사용합니다. 예를 들어, 다음과 같이 사용할 수 있습니다.

```java
@Mock
MyClass myClass;
```

## @MockBean 어노테이션

`@MockBean`은 스프링 부트에서 제공하는 특별한 어노테이션입니다. 스프링의 애플리케이션 컨텍스트(application context)에 목 객체를 등록하고 싶을 때 사용합니다. 이렇게 하면 스프링의 다른 빈(Bean)들이 이 목 객체를 자동으로 주입(Autowired) 받을 수 있습니다.

## 주요 차이점

1. **라이브러리와 프레임워크**: `@Mock`은 Mockito 라이브러리에 종속적이며, `@MockBean`은 스프링 부트에 종속적입니다.
2. **목 객체의 범위**: `@Mock`은 지역적인 목 객체를 생성하며, `@MockBean`은 전역적으로 스프링 애플리케이션 컨텍스트에 목 객체를 등록합니다.
3. **사용 상황**: `@Mock`은 단순 Mockito 테스트에 적합하고, `@MockBean`은 스프링 부트와 함께 사용될 때 더 유용합니다.

## 예외와 에러

테스트 중에 잘못된 설정을 하면 다음과 같은 에러를 볼 수 있습니다.

- `NoSuchBeanDefinitionException`: 이 에러는 `@MockBean`을 사용하면서 해당 빈이 스프링 애플리케이션 컨텍스트에 없을 때 발생합니다.

## 결론

`@Mock`과 `@MockBean`은 각각의 사용 상황과 필요에 따라 선택해야 합니다. 테스트의 범위, 스프링 부트의 사용 여부 등을 고려하여 적절한 어노테이션을 선택하면 효과적인 단위 테스트를 작성할 수 있습니다. 이해가 어려운 단어나 내용이 있으면, 이를 참고하여 복습하면 도움이 될 것입니다.